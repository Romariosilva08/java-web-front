(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const b="http://localhost:3000";function h(o){return fetch(`${b}${o}`).then(e=>{if(!e.ok)throw new Error(`Erro ao acessar o endpoint ${o}: ${e.statusText}`);return e.json()}).catch(e=>{throw console.error("Erro ao acessar o endpoint:",e),e})}const m={top5:document.querySelector('[data-name="top5"]'),lancamentos:document.querySelector('[data-name="lancamentos"]'),series:document.querySelector('[data-name="series"]'),todasSeries:document.querySelector('[data-name="todasSeries"]')};function u(o,e){const s=o.querySelector("ul");s&&o.removeChild(s);const c=document.createElement("ul");c.className="lista";const t=e.map(r=>`
        <li>
            <a href="/detalhes.html?id=${r.id}">
                <img src="${r.poster}" alt="${r.titulo}">
            </a>
        </li>
    `).join("");c.innerHTML=t,o.appendChild(c)}function f(o){console.error(o)}const p=document.querySelector("[data-categorias]"),g=document.querySelectorAll(".section");p.addEventListener("change",function(){const o=document.querySelector('[data-name="categoria"]'),e=p.value;if(e==="todos"){for(const s of g)s.classList.remove("hidden");o.classList.add("hidden")}else{for(const s of g)s.classList.add("hidden");o.classList.remove("hidden"),h(`/api/series/categoria/${e}`).then(s=>{u(o,s)}).catch(s=>{f("Ocorreu um erro ao carregar os dados da categoria.")})}});S();function S(){const o=["/api/series/top5","/api/series/lancamentos","/api/series"];Promise.all(o.map(e=>h(e).catch(s=>null))).then(e=>{e[0]?u(m.top5,e[0]):console.error("Erro ao carregar top5"),e[1]?u(m.lancamentos,e[1]):console.error("Erro ao carregar lançamentos"),e[2]?(u(m.series,e[2].slice(0,5)),u(m.todasSeries,e[2])):console.error("Erro ao carregar todas as séries")}).catch(e=>{console.error("Erro geral ao carregar dados:",e),f("Ocorreu um erro ao carregar os dados.")})}document.addEventListener("DOMContentLoaded",function(){const o=document.getElementById("toggle-dark-mode"),e=document.body;o?o.addEventListener("click",function(){e.classList.toggle("dark-mode"),e.classList.contains("dark-mode")?o.textContent="light_mode":o.textContent="dark_mode"}):console.error('Botão "toggle-dark-mode" não encontrado no DOM.')});document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("bot-toggle"),e=document.getElementById("chat-box"),s=document.getElementById("chat-messages"),c=document.getElementById("chat-input"),t=document.getElementById("chat-send"),r=new Map;o.addEventListener("click",()=>{e.style.display=e.style.display==="block"?"none":"block"}),t.addEventListener("click",()=>{const n=c.value.trim();n&&(i(n,"user"),c.value="",y(n))});function i(n,d){const a=document.createElement("div");a.className=`message ${d}`,a.textContent=n,s.appendChild(a),s.scrollTop=s.scrollHeight}async function y(n){try{const d=await E(n);i(d,"bot")}catch(d){console.error("Erro ao obter resposta do bot:",d),i("Desculpe, ocorreu um erro ao processar sua mensagem.","bot")}}async function E(n){const d="http://localhost:3000/chatbot";if(r.has(n))return r.get(n);try{const a=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n})});if(!a.ok){const L=await a.json();throw console.error("Detalhes do erro:",L),new Error(`Erro na requisição: ${a.status} ${a.statusText}`)}const l=await a.json();if(console.log("Resposta do backend:",l),!l||!l.response)throw new Error("Resposta da API inválida");return r.set(n,l.response),l.response}catch(a){throw console.error("Erro ao obter resposta do bot:",a),a}}});
